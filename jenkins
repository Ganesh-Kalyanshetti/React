pipeline
{
	agent any
	environment
	{
		DOCKER_CREDENTIALS = credentials('dockerhostid') 
		DOCKER-IMAGE = 'ganesh021/rect-app'
	}
	stages
	{
		stage('Git link')
		{
			steps
			{
				git branch : main , url = 'https://github.com/Ganesh-Kalyanshetti/React.git'
			}
		}
		stage('Create docker image')
		{
			steps{
			
			script{
			
			docker-img= docker.build('${DOCKER-IMAGE}:latest')
			}
			}
		}
		stage('push to dockerhub')
		{
			steps{
			script
				{
					docker.withRegistry('https://index.docker.io/v1/',"dockerhostid")
				{
					docker-img.push()
				}
			}
			}
		}
	}
	post
	{
		success{
			echo "completed"
		}
		failure
		{
			echo "Failed"
		}
	}
}
